<!DOCTYPE html>
<html lang="en">

<head>
    <title>VNShop Manager</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">

    <script type="text/javascript" charset="utf8"
        src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>

</head>

<body>
    <div class="container-fluid" style="height: 100%">


        <div class="row">
            <div class="col-lg-3 h-100 " style="background: #0573ff; height: 500px; position: fixed; top: 0px;
    left: 0px;
    z-index: 100;">
                <h3 class="text-lg-center mt-2" style="color: white;">Bảng điều khiển</h3>
                <div class="dropdown dropdown dropright">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                        <i class="fas fa-bars"></i>
                        Sản phẩm
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/index">Danh sách sản phẩm</a>
                        <a class="dropdown-item" href="/add_product">Thêm sản phẩm</a>

                    </div>

                </div>
                </br>
                <div class="dropdown dropdown dropright">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                        <i class="fas fa-bars"></i>
                        Loại Sản phẩm
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/list_cate">Danh sách Loại sản phẩm</a>
                        <a class="dropdown-item" href="/add_cate">Thêm Loại sản phẩm</a>

                    </div>
                </div>
                </br>
                <div class="dropdown dropdown dropright">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                        <i class="fas fa-bars"></i>
                        Người dùng
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/list_user">Danh sách người dùng</a>
                    </div>
                </div>
                </br>
                <div class="dropdown dropdown dropright">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                        <i class="fas fa-bars"></i>
                        Khuyến mãi
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/list_gift">Danh sách khuyến mãi</a>
                    </div>
                </div>
                </br>
                <div class="dropdown dropdown dropright">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                        <i class="fas fa-bars"></i>
                        Banner
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/add_banner">Thêm Banner</a>
                    </div>
                </div>
                </br>

                <div class="dropdown dropdown dropright mt-10">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                        <i class="fas fa-bars"></i>
                        Đặt hàng
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/list_order">Danh sách Đặt hàng</a>
                        {{!-- <a class="dropdown-item" href="/statistical">Thống Kê</a> --}}
                    </div>
                </div>
                <div class="dropdown dropdown dropright mt-10" style="margin-top: 20px;">
                    <button type="button" class="btn btn-primary dropdown-toggle btn-bgr" data-toggle="dropdown">
                        <i class="fas fa-bars"></i>
                        Thống kê
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/statistical">Thống kê</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-9" style="position: absolute;
    right: 0;">


                <div class="d-flex">

                    <form class="form-inline my-2 my-lg-0 p-2 mr-auto">
                        {{!-- <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button> --}}
                    </form>
                    <div class="p-2 ">
                        <img class="rounded-circle"
                            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQwbGozsS9QP10p16rZiCrQD0koXVkI4c7LwUHab9dkmFRcN0VqCkB37f2y0EnySItwykg&usqp=CAU"
                            alt="" height="42" width="42">
                    </div>
                    <div class="p-2">
                        <p class="text-lg-center mt-2">Admin</p>
                    </div>
                </div>
                <table id="example" class="table table-striped table-bordered" style="width:100%">
                    <thead>
                        <tr>
                            <th>Id Orders</th>
                            <th>Total Amount</th>
                            <th>Price</th>
                            <th>Purchase Time</th>
                            <th>Status</th>
                            <th>Phone</th>
                            <th>Address</th>
                            <th>User</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                            {{# each orderList}}


                        <td>{{idOrder}}</td>
                        <td>{{totalAmount}}</td>
                        <td>{{totalPrice}}</td>
                        <td>{{created_at}}</td>
                        
                        {{!-- tuta --}}
                    <script>
                            var color = "";
                            "{{status}}" === "Giao hàng thành công" ? color = "green" : color = "black";
                            var str = `<td style="color: ${color}">{{status}}</td>`;
                        </script>

                        <script>
                            document.write(str);
                        </script>
                            {{# each user}}
                        <td>{{phone}}</td>
                        <td>{{address}}</td>
                        <td>{{username}}</td>
                          {{/each}}

                        <td>
                            <a class="btn btn-primary" href="/get_order-details/{{idOrder}}">Chi tiết đơn hàng</a>

                            <script>
                                var type = "";
                                
                                //xac nhan don hang "{{status}}" === "Accept" ? type = "hidden" : type = "";

                                "{{status}}" === "Giao hàng thành công" ? type = "hidden" : type = "";
                                var str1 = `<form ${type} action="/accept_order-details" method="post">
                            <input type="hidden" name="idOrder" value="{{idOrder}}">
                            <input type="submit" onclick="return confirm('có chắc chắn xác nhận đơn hàng sang trạng thái đang giao hàng không')" value="Xác nhận đơn hàng"  class="btn btn-outline-primary mr-0"></input>

                        </form>`

                            //giao hang thanh cong

                            var str2 = `<form ${type} 
                            "{{status}}" === "Đang giao hàng" ? type = "hidden" : type = "";
                            action="/btn_success" method="post">
                                    <input type="hidden" name="idOrder" value="{{idOrder}}">
                                    <input type="submit" onclick="return confirm('có chắc chắn đang giao hàng')" value="Giao hàng thành công"  class="btn btn-outline-success"></input>

                                </form>`

                         //xoa don hang
                       
                                var str3 = `<form ${type}>
                                <input formmethod="get" formaction="/deletesp/{{this._id}}" class="btn btn-danger" type="submit"
                            onclick="return confirm('có chắc chắn xóa')" value="xóa sản phẩm">
                            </form>`

                            </script>
                            <script>
                             document.write(str1);
                                document.write(str2);
                                document.write(str3);
                       
                            </script>

                            <!--                        <a ="hidden" class="btn btn-outline-danger" href="#">Cancel</a>-->
                        </td>
                        </tr>
                          {{/each}}
                    </tbody>

                </table>

            </div>
        </div>

    </div>

    <script>
        // $(document).ready(function () {
        //     $('#table').DataTable();
        // });
        $(document).ready(function () {
            $('#example').DataTable();
        });
    </script>

</body>

</html>